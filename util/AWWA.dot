digraph G
{
	rankdir = LR;
	
	Lin[label=" ", style=invisible];
	Lout[label=" ", style=invisible];
	Lbot[label=" ", style=invisible];
	Ltop[label=" ", style=invisible];
	
	Aket[label="Aket"];
	Abra[label="Abra", shape="box"];
	Wbot[label="Wbot", shape="box"];
	Wtop[label="Wtop"];
	
	Rin[label=" ", style=invisible];
	Rout[label=" ", style=invisible];
	Rbot[label=" ", style=invisible];
	Rtop[label=" ", style=invisible];
	
	Abra -> Lin [label="Lin"];
	Lout -> Aket [label="Lout"];
	Lbot -> Wbot [label="Lbot"];
	Ltop -> Wtop [label="Ltop"];
	
	// bug: same rank & label reverses direction
	Wtop -> Aket [label="s3"];
	Wbot -> Wtop [label="s2"]
	Abra -> Wbot [label="s1"];
	
	Rout -> Abra [label="Rout"];
	Aket -> Rin [label="Rin"];
	Wbot -> Rbot [label="Rbot"];
	Wtop -> Rtop [label="Rtop"];
	
	{rank=same Lin Lout Lbot Ltop}
	{rank=same Abra Aket Wbot Wtop}
	{rank=same Rin Rout Rbot Rtop}
}
